# iOS 捷徑設定教學

## 📱 功能說明

這個 iOS 捷徑可以讓你：
1. 在 Perplexity（或任何網站）分享文章連結
2. 自動提取文章內容
3. 使用 Claude AI 翻譯成繁體中文
4. 複製翻譯結果到剪貼簿

---

## 🚀 快速設定（3 步驟）

### 步驟 1：部署翻譯 API

請先完成以下任一方式部署：

#### 方式 A：部署到 Vercel（推薦）
```bash
# 在專案目錄執行
vercel --prod
```

部署後會得到一個網址，例如：
```
https://your-project.vercel.app
```

#### 方式 B：本地測試（開發用）
```bash
npm run dev
```
會在 `http://localhost:3000` 啟動服務

---

### 步驟 2：下載並安裝捷徑

1. **在 iPhone 上點擊下方連結**（部署後替換為實際連結）：

   📥 [下載 Perplexity 翻譯捷徑](./shortcut/Perplexity翻譯器.shortcut)

2. **或手動創建捷徑**（見下方詳細步驟）

---

### 步驟 3：設定 API 端點

安裝捷徑後，需要設定你的 API 端點：

1. 打開「捷徑」App
2. 找到「Perplexity 翻譯器」捷徑
3. 點擊右上角「...」進入編輯模式
4. 找到「URL」欄位
5. 替換為你的 API 網址：
   ```
   https://your-project.vercel.app/api/translate
   ```
6. 點擊「完成」儲存

---

## 🛠️ 手動創建捷徑（詳細步驟）

如果無法直接下載捷徑文件，可以手動創建：

### 1. 打開「捷徑」App

### 2. 點擊右上角「+」創建新捷徑

### 3. 按順序添加以下操作：

#### ① 接收輸入
- 搜尋並添加「接收」動作
- 輸入類型：選擇「URL」

#### ② 獲取 URL
- 添加「取得變數」動作
- 變數：選擇「捷徑輸入」

#### ③ 顯示通知（開始提取）
- 添加「顯示通知」動作
- 內容：`正在提取文章內容...`

#### ④ 建立 JSON 請求
- 添加「字典」動作
- 添加鍵值對：
  - 鍵：`url`
  - 值：`捷徑輸入`（變數）

#### ⑤ 發送 API 請求
- 添加「取得 URL 內容」動作
- URL：`https://your-project.vercel.app/api/translate`
- 方法：`POST`
- 請求正文：選擇「JSON」
- JSON：選擇上一步的「字典」

#### ⑥ 取得 JSON 回應
- 添加「取得字典值」動作
- 取得：`data.translation`
- 來自：上一步的「URL 內容」

#### ⑦ 複製到剪貼簿
- 添加「拷貝到剪貼板」動作
- 內容：上一步的結果

#### ⑧ 顯示完成通知
- 添加「顯示通知」動作
- 內容：`✅ 翻譯完成！已複製到剪貼簿`

### 4. 設定捷徑名稱和圖示

- 點擊捷徑名稱區域
- 名稱：`Perplexity 翻譯器`
- 圖示：選擇一個喜歡的圖示（建議：🌐 或 📝）
- 顏色：任選

### 5. 啟用分享選單

- 在捷徑設定中
- 開啟「在分享工作表中顯示」
- 分享工作表類型：選擇「URL」

---

## 📖 使用方式

### 在任何支援分享的 App 中：

1. **瀏覽文章**
   - 在 Safari、Chrome 或 Perplexity App 中打開文章

2. **點擊分享按鈕**
   - 點擊瀏覽器的「分享」圖示（通常是一個方框加箭頭）

3. **選擇「Perplexity 翻譯器」**
   - 在分享選單中找到並點擊你的捷徑
   - 如果沒看到，往下滑找「更多」或「編輯動作」

4. **等待翻譯完成**
   - 會顯示「正在提取文章內容...」通知
   - 翻譯完成後顯示「✅ 翻譯完成！已複製到剪貼簿」

5. **使用翻譯內容**
   - 翻譯結果已自動複製到剪貼簿
   - 在任何 App 中長按即可貼上

---

## 🎯 進階設定（選用）

### 設定 Siri 語音啟動

1. 打開「捷徑」App
2. 長按「Perplexity 翻譯器」
3. 點擊「詳細資訊」
4. 點擊「加入 Siri」
5. 錄製語音指令，例如：
   - "翻譯這篇文章"
   - "幫我翻譯"
   - "translate this"

### 加入主畫面

1. 長按「Perplexity 翻譯器」
2. 點擊「詳細資訊」
3. 點擊「加入主畫面」
4. 這樣可以快速從主畫面啟動

---

## 💡 使用範例

### 範例 1：翻譯 Perplexity 文章

```
原始 URL:
https://www.perplexity.ai/discover/you/analysts-warn-ai-bubble-surpas-OR1EcSq6Tz6seO8XN9Ic4w

步驟:
1. 在 Perplexity 瀏覽文章
2. 點擊分享 → 選擇「Perplexity 翻譯器」
3. 等待 5-10 秒
4. 翻譯完成，已複製到剪貼簿
5. 貼到筆記 App 或訊息中
```

### 範例 2：翻譯新聞文章

```
支援的網站：
- BBC News
- CNN
- The Guardian
- Medium
- 幾乎所有公開文章網站

使用方式相同：
分享 → Perplexity 翻譯器 → 完成
```

---

## ❓ 常見問題

### Q: 為什麼翻譯失敗？

**可能原因：**
1. 網路連線問題
2. API 端點設定錯誤
3. 文章內容受限（需要登入）
4. API 金鑰無效或額度用盡

**解決方式：**
- 檢查網路連線
- 確認 API URL 正確
- 嘗試其他公開文章
- 檢查 Vercel 部署狀態

### Q: 翻譯很慢怎麼辦？

**原因：**
- 文章太長（超過 3000 字會分段翻譯）
- 網路速度較慢
- API 服務器負載

**建議：**
- 耐心等待（通常 5-15 秒）
- 長文章可能需要 20-30 秒
- 確保網路穩定

### Q: 可以翻譯其他語言嗎？

**目前支援：**
- 英文 → 繁體中文

**未來計劃：**
- 可以修改捷徑，在請求中添加目標語言參數
- 修改 API 支援多語言翻譯

### Q: 翻譯品質如何？

**優勢：**
- 使用 Claude Sonnet 4 模型
- 專業級翻譯品質
- 保留原文格式和段落
- 理解上下文，翻譯自然流暢

**比 Google 翻譯好在哪裡：**
- 更自然的中文表達
- 更好的專業術語處理
- 保持原文語氣和風格

---

## 🔧 疑難排解

### 捷徑無法執行

1. **確認捷徑權限**
   - 設定 → 捷徑 → 進階
   - 開啟「允許執行腳本」

2. **重新安裝捷徑**
   - 刪除舊的捷徑
   - 重新創建

### API 請求失敗

1. **檢查 Vercel 部署**
   ```bash
   # 查看部署日誌
   vercel logs
   ```

2. **測試 API 端點**
   ```bash
   curl -X POST https://your-project.vercel.app/api/translate \
     -H "Content-Type: application/json" \
     -d '{"url": "https://example.com"}'
   ```

3. **檢查環境變數**
   - 登入 Vercel Dashboard
   - 檢查 `ANTHROPIC_API_KEY` 是否正確設定

---

## 📊 成本估算

### Claude API 費用

- **模型**：Claude Sonnet 4
- **費用**：約 $0.003 / 1000 字元
- **估算**：
  - 一篇 3000 字文章 ≈ $0.009（約 NT$0.3）
  - 100 篇文章 ≈ $0.90（約 NT$27）
  - 每月 1000 篇 ≈ $9（約 NT$270）

### Vercel 費用

- **免費額度**：每月 100GB 流量
- **對於個人使用**：完全免費
- **超過額度**：$20/月 Pro 方案

---

## 🎉 完成！

現在你可以：
✅ 一鍵翻譯 Perplexity 文章
✅ 翻譯任何網頁內容
✅ 獲得高品質繁體中文翻譯
✅ 自動複製到剪貼簿

享受你的翻譯助手吧！🚀
